[
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "config",
          "list",
          "--format=json"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": {
        "compute": {
          "region": "us-central1",
          "zone": "us-central1-a"
        },
        "core": {
          "account": "pmontgom@broadinstitute.org",
          "disable_usage_reporting": "False",
          "project": "broad-achilles"
        }
      }
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "firewall-rules",
          "list",
          "--filter=name=allow-altssh-ingress-from-iap",
          "--format=json",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "allowed": [
            {
              "IPProtocol": "tcp",
              "ports": [
                "3022"
              ]
            }
          ],
          "creationTimestamp": "2023-03-28T18:35:10.085-07:00",
          "description": "",
          "direction": "INGRESS",
          "disabled": false,
          "id": "8513582235659414305",
          "kind": "compute#firewall",
          "logConfig": {
            "enable": false
          },
          "name": "allow-altssh-ingress-from-iap",
          "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
          "priority": 1000,
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/firewalls/allow-altssh-ingress-from-iap",
          "sourceRanges": [
            "35.235.240.0/20"
          ]
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "disks",
          "list",
          "--filter=name=hermit-demo-pd",
          "--zones=us-central1-a",
          "--format=json",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": []
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": []
    }
  ],
  [
    "gcloud",
    {
      "args": [
        [
          "compute",
          "disks",
          "create",
          "hermit-demo-pd",
          "--description=MASKED",
          "--size=50",
          "--zone=us-central1-a",
          "--type=pd-standard",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {
        "timeout": 300
      }
    },
    {
      "returned": null
    }
  ],
  [
    "gcloud",
    {
      "args": [
        [
          "compute",
          "instances",
          "create",
          "hermit-demo",
          "--image-family=cos-stable",
          "--image-project=cos-cloud",
          "--zone=us-central1-a",
          "--machine-type=n2-standard-2",
          "--metadata-from-file=user-data=<#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        >",
          "--disk=name=hermit-demo-pd,device-name=hermit-demo-pd,auto-delete=no",
          "--zone=us-central1-a",
          "--project=broad-achilles",
          "--service-account=hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com"
        ]
      ],
      "kwargs": {
        "timeout": 300
      }
    },
    {
      "returned": null
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "MO4jelVgUvM=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "a9b5_XviB7s=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "a9b5_XviB7s=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "a9b5_XviB7s=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.122.178.164",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "F7zRt_Frohs=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Unknown CPU Platform",
          "creationTimestamp": "2025-12-05T13:30:03.225-08:00",
          "deletionProtection": false,
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "10",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "gort1-MSqS0=",
          "id": "433166739285405749",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:30:11.297-08:00",
          "lastStopTimestamp": "2025-12-05T13:31:20.190-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "-6e5jZ7CRZs=",
            "items": [
              {
                "key": "user-data",
                "value": "#cloud-config\n\nbootcmd:\n- mkfs /dev/sdb\n- shutdown -h now\n        "
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "NCAamdq5aQU=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.10",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "MIGRATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "TERMINATED",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud",
    {
      "args": [
        [
          "compute",
          "instances",
          "delete",
          "hermit-demo",
          "--zone=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": null
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": []
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": []
    }
  ],
  [
    "gcloud",
    {
      "args": [
        [
          "compute",
          "instances",
          "create",
          "hermit-demo",
          "--description=MASKED",
          "--image-family=cos-stable",
          "--image-project=cos-cloud",
          "--maintenance-policy=TERMINATE",
          "--boot-disk-size=55GB",
          "--zone=us-central1-a",
          "--project=broad-achilles",
          "--machine-type=n2-standard-2",
          "--metadata-from-file=user-data=<#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa X'\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n>",
          "--metadata=google-monitoring-enabled=true",
          "--disk=name=hermit-demo-pd,device-name=hermit-demo-pd,auto-delete=no",
          "--scopes=storage-ro,logging-write,monitoring-write,pubsub,service-management,service-control,trace,compute-rw",
          "--service-account=hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com"
        ]
      ],
      "kwargs": {
        "timeout": 300
      }
    },
    {
      "returned": null
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\n",
        "Warning: Permanently added 'compute.8948240343373902296' (ED25519) to the list of known hosts.\r\n"
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n8792a6636857: Pull complete\nDigest: sha256:52150323a61388610ad57bafb3003d960cff2517ef88f14caa84fea1ed37f308\nStatus: Downloaded newer image for us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n8792a6636857: Pull complete\nDigest: sha256:52150323a61388610ad57bafb3003d960cff2517ef88f14caa84fea1ed37f308\nStatus: Downloaded newer image for us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_output",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--project",
          "broad-achilles",
          "--zone",
          "us-central1-a",
          "--tunnel-through-iap",
          "--command",
          "cat /var/log/hermit.log"
        ]
      ],
      "kwargs": {
        "ignore_error": true,
        "retries_on_timeout": 10
      }
    },
    {
      "returned": [
        "Starting cloudinit bootcmd...\nStarting check filesystem /dev/disk/by-id/google-hermit-demo-pd\nfsck from util-linux 2.38.1\n/dev/sdb: clean, 11/3276800 files, 218931/13107200 blocks\nFinished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\nMounting /dev/disk/by-id/google-hermit-demo-pd as /mnt/disks/hermit-demo-pd\nFinished hermit VM setup\n+ echo 'initial mount state'\ninitial mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n+ echo 'Setting up ubuntu home directory permissions...'\nSetting up ubuntu home directory permissions...\n+ usermod -u 2000 ubuntu\nusermod: no changes\n+ groupmod -g 2000 ubuntu\n+ chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n+ chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n+ echo 'Mounting home directory into place...'\nMounting home directory into place...\n+ mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n+ chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n+ chmod 0666 /var/run/docker.sock\n+ echo 'Starting up services...'\nStarting up services...\n+ systemctl daemon-reload\n+ systemctl restart docker\n+ systemctl start container-sshd.service\nConfiguring supplied registries....\nAdding config for registries: us-central1-docker.pkg.dev\n/home/cloudservice/.docker/config.json configured to use this credential helper for GCR registries\n+ systemctl start suspend-on-idle.service\n+ echo 'final mount state'\nfinal mount state\n+ mount\n/dev/mapper/vroot on / type ext2 (ro,relatime)\ndevtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=4065524k,nr_inodes=1016381,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=1627660k,nr_inodes=819200,mode=755)\ncgroup2 on /sys/fs/cgroup type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate,memory_recursiveprot)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\ntmpfs on /etc/machine-id type tmpfs (ro,size=1627660k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=31,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=502)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /mnt/disks type tmpfs (rw,relatime,size=256k,mode=755)\ndebugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime,gid=605,mode=750)\ntracefs on /sys/kernel/tracing type tracefs (rw,nosuid,nodev,noexec,relatime)\nefivarfs on /sys/firmware/efi/efivars type efivarfs (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\nconfigfs on /sys/kernel/config type configfs (rw,nosuid,nodev,noexec,relatime)\noverlayfs on /etc type overlay (rw,relatime,lowerdir=/etc,upperdir=/tmp/etc_overlay/etc,workdir=/tmp/etc_overlay/.work,uuid=on)\n/dev/sda8 on /usr/share/oem type ext4 (ro,nosuid,nodev,noexec,relatime)\n/dev/sda1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\n/dev/sda1 on /var type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /var/lib/cloud type tmpfs (rw,nosuid,nodev,relatime,size=4096k,mode=755)\n/dev/sda1 on /var/lib/containerd type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/docker type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/google type ext4 (rw,nosuid,nodev,relatime,commit=30)\n/dev/sda1 on /var/lib/toolbox type ext4 (rw,nodev,relatime,commit=30)\n/dev/sda1 on /tmp type ext4 (rw,nosuid,nodev,noexec,relatime,commit=30)\ntmpfs on /tmp type tmpfs (rw,relatime,size=256k,mode=755)\ntmpfs on /var/tmp type tmpfs (rw,relatime,size=256k,mode=755)\n/dev/sdb on /mnt/disks/hermit-demo-pd type ext4 (rw,relatime)\n/dev/sdb on /home/ubuntu type ext4 (rw,relatime)\n+ echo 'hermit-setup.sh complete'\nhermit-setup.sh complete\nUnable to find image 'us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1' locally\nv1: Pulling from depmap-omics/docker/hermit-dev-env\ndbf6a9befcde: Pulling fs layer\nd6b748fe7fad: Pulling fs layer\n3f6b49d80f24: Pulling fs layer\nf58ce966cd39: Pulling fs layer\n089ba640f011: Pulling fs layer\n6b22df04d12c: Pulling fs layer\n01dcbecd78e4: Pulling fs layer\n40a3ebe5ad01: Pulling fs layer\n5fc4c2d637fa: Pulling fs layer\n9f37869d1686: Pulling fs layer\n0832c10da011: Pulling fs layer\n8792a6636857: Pulling fs layer\n01dcbecd78e4: Waiting\n40a3ebe5ad01: Waiting\n5fc4c2d637fa: Waiting\n9f37869d1686: Waiting\n0832c10da011: Waiting\n8792a6636857: Waiting\nf58ce966cd39: Waiting\n089ba640f011: Waiting\n6b22df04d12c: Waiting\n3f6b49d80f24: Verifying Checksum\n3f6b49d80f24: Download complete\ndbf6a9befcde: Verifying Checksum\ndbf6a9befcde: Download complete\nd6b748fe7fad: Verifying Checksum\nd6b748fe7fad: Download complete\n6b22df04d12c: Verifying Checksum\n6b22df04d12c: Download complete\nf58ce966cd39: Verifying Checksum\nf58ce966cd39: Download complete\n089ba640f011: Verifying Checksum\n089ba640f011: Download complete\n01dcbecd78e4: Verifying Checksum\n01dcbecd78e4: Download complete\n9f37869d1686: Verifying Checksum\n9f37869d1686: Download complete\n5fc4c2d637fa: Verifying Checksum\n5fc4c2d637fa: Download complete\n0832c10da011: Verifying Checksum\n0832c10da011: Download complete\n40a3ebe5ad01: Verifying Checksum\n40a3ebe5ad01: Download complete\n8792a6636857: Verifying Checksum\n8792a6636857: Download complete\ndbf6a9befcde: Pull complete\nd6b748fe7fad: Pull complete\n3f6b49d80f24: Pull complete\nf58ce966cd39: Pull complete\n089ba640f011: Pull complete\n6b22df04d12c: Pull complete\n01dcbecd78e4: Pull complete\n40a3ebe5ad01: Pull complete\n5fc4c2d637fa: Pull complete\n9f37869d1686: Pull complete\n0832c10da011: Pull complete\n8792a6636857: Pull complete\nDigest: sha256:52150323a61388610ad57bafb3003d960cff2517ef88f14caa84fea1ed37f308\nStatus: Downloaded newer image for us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\nServer listening on 0.0.0.0 port 3022.\r\nServer listening on :: port 3022.\r\n",
        ""
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud",
    {
      "args": [
        [
          "compute",
          "ssh",
          "hermit-demo",
          "--tunnel-through-iap",
          "--zone=us-central1-a",
          "--project=broad-achilles",
          "--command",
          "sudo shutdown now"
        ]
      ],
      "kwargs": {
        "timeout": 20
      }
    },
    {
      "returned": null
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "QXUkqsYQdNc=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "RUNNING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "aS1XXUBNsnk=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "aS1XXUBNsnk=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "aS1XXUBNsnk=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "aS1XXUBNsnk=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Intel Cascade Lake",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "aS1XXUBNsnk=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "natIP": "34.171.107.202",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "EEgtMkKqIM4=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "STOPPING",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": [
        {
          "canIpForward": false,
          "cpuPlatform": "Unknown CPU Platform",
          "creationTimestamp": "2025-12-05T13:31:36.730-08:00",
          "deletionProtection": false,
          "description": "hermit v2.1.0 VM started user hermit-test",
          "disks": [
            {
              "architecture": "X86_64",
              "autoDelete": true,
              "boot": true,
              "deviceName": "persistent-disk-0",
              "diskSizeGb": "55",
              "guestOsFeatures": [
                {
                  "type": "IDPF"
                },
                {
                  "type": "TDX_CAPABLE"
                },
                {
                  "type": "SEV_SNP_CAPABLE"
                },
                {
                  "type": "VIRTIO_SCSI_MULTIQUEUE"
                },
                {
                  "type": "UEFI_COMPATIBLE"
                },
                {
                  "type": "SEV_CAPABLE"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE_V2"
                },
                {
                  "type": "GVNIC"
                },
                {
                  "type": "SEV_LIVE_MIGRATABLE"
                }
              ],
              "index": 0,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "licenses": [
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud/global/licenses/cos-pcid",
                "https://www.googleapis.com/compute/v1/projects/cos-cloud-shielded/global/licenses/shielded-cos"
              ],
              "mode": "READ_WRITE",
              "shieldedInstanceInitialState": {
                "dbs": [
                  {
                    "content": "MIIEGjCCAwKgAwIBAgIRAIB8dI_TA8yg7WFQhaIIaTMwDQYJKoZIhvcNAQELBQAwgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDE0M1oXDTM1MTAwMzA3MDE0M1owgZExCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEeMBwGA1UEAxMVVUVGSSBEQiBLZXkgdjIwMjUxMDA0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2Bq7MhB0qgYKu_W-HXKvKbOeCE0OHmbE_qrfoCdSi_yS1G37JtopZd0h2nzDaoRz0o8NNMkGyNWBjwZLbDyhiNAPPDHGtQPgS6LfuZHPd0I3mjq0NR3AvNbiBl-PMF25N-Nc2j4Lew9l5HcdNGhINVvGZ_ynGcVa-YSGWCooNXPuaFJDYVZG_tUupbB5-SUnaDG8Xf2Hef3wW8RR9quNr6uNtqxRY74HWU9i4rJeck3wiuBsJcsTC8Rz7CwroRRoNLb5eEqjftn6vR_qluZgfrkdVnBYXRb-2DO5zPBgmw8KdNXGVViJAuehhnaFPK8uy5xXdQ4ljtrQp3hY97DoKwIDAQABo2swaTAPBgNVHRMBAf8EBTADAQH_MCkGA1UdDgQiBCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jArBgNVHSMEJDAigCCD8cIUGAv4HKpm0Mwoj5_7RC2NeFwuPJngg67VGz4S8jANBgkqhkiG9w0BAQsFAAOCAQEAFPs8LsTVdHdShxCsJ2ANxzeB_baKlDc99yuJRqyhIooebnEWXgDiLNO9NJXksdsiQvponLGqGVCDi8OBm_gCwiPVEeyxhbHd3rfAk-IbOuNTBN0HeohJsTMbMkoBWtSvsRe7BxSfVqfZ_9A7EVvWf6iXgDwPLlvXEobXpG57Kp0gXUwud38ud1MsDjOvnZ6LCJ-St0zVSUOJqQUFCvm9kADXwV3_L9wvUOGhUHQ5WoYxyRWQg9lsPbkXWvOuNhr0QrYq01F6eeJ3XI2goMow9cifH_xekVqE7zS5qV9h4GnlnDFBF49lslYE23V7vQTF6H8umtS59wDZFL9KcWGEcg==",
                    "fileType": "X509"
                  }
                ],
                "dbxs": [
                  {
                    "content": "MIIEaDCCA1CgAwIBAgIJAKqfsrCdjyCoMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxMB4XDTE4MTIwODAxMTk0MVoXDTI4MTIwNTAxMTk0MVowfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEXMBUGA1UEAxMOVUVGSSBEQiBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCtZ9U4P5aWlBwiTocmkUjOn2XpvHUlUOnsnhvsm994hAb0MNk2d3fXa8Nz14v9JiBTSf70KU2Zhxb_bSN3KAIv-f7F2AuXte7U9SnzZ02UDmK4TU1bFQW67Y3Gc2hWprCHYEjiRQD4J3WPWhuZnAXqzXQk3uDWVPETi-G9KAM1R-yNxZfoEjfIKhLabDsWqDtnMSovObLoVfwTdnm0WCuYTFtY_CKNxuxeKuzDsC5Su9N3dSFbpGhXJjwUaXPLWY5MFIqIQNBfhmWzDd4PItXaXV3V44IqWTXclE2aSUqkwNrEZ1cRpHG4PYM1aHVmjcO_dWlvthcepTIMIEMAXg2LAgMBAAGjgeYwgeMwHQYDVR0OBBYEFNXbmmdkM0aIsPMyEIv25JRaOPA-MIGzBgNVHSMEgaswgaiAFNXbmmdkM0aIsPMyEIv25JRaOPA-oYGEpIGBMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEUMBIGA1UECxMLQ2hyb21pdW0gT1MxFzAVBgNVBAMTDlVFRkkgREIgS2V5IHYxggkAqp-ysJ2PIKgwDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAJ2vbNymAKTUbRvxnAohHozVUByrKHCq1o8b-bKrgv7Ch0X4itfG8Uwvt0xG7CTpl_Dno92MtpOpFv4ydqox-pP1kTsRcnFNggndXdjpGILIB94KmFiYJvB6RzocJsXsXBa0tULOR24qiB9f93kfITS7Ec60WjFfpgYKEnuEgcV0yBuZzAZbxo1uF4n1hhmVUnKtEI9pX-8geYIIqIYiwwT2jnhFogWw4PeSyg-HMR1CLwwJeH2XDa924LpgHFuR-AbikipAE2vIE0yqJzo0o4tn9-sRuMaQcZ4VQqIzMiniW5H7nGeoQY3ktHX5eq6x-4jFvdLnzzq_D4sS-UWHzOA==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIIEiTCCA3GgAwIBAgIJAOzm3xz71Vu6MA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLR29vZ2xlIExMQy4xFDASBgNVBAsTC0Nocm9taXVtIE9TMSEwHwYDVQQDExhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwHhcNMTgxMjA4MDExOTQwWhcNMjgxMjA1MDExOTQwWjCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwg5hvVH6fJSBNji7ynBl1SQzWceL5P3ul6RcB-1s5wXqzXlIHiyRqBdj4hj2pLzpKJGmXWnerIwJOkdsFg7IwZpA4xHE1F-M8XlpuuUn_Xdfccef36ddZEUH6QLwNm96T89F4ujt0omJ-0GV37vBsxEY-hwR3O8XBgyx8TvvYxNnVyTgi19qQdb2ES8-yWJkebdzgugcmNf9K-55fnEiyxWtrvEQb2sowWIS3-b1I_BP85pW2pldh9yQWfb3OY2NJhGSbQSnLi3J0IhRXROEtAXCU4MLTq2cHOpGX0DtJP_g_jD1pnC1O6CCZgVycK4DgZXeDzOG_2Uimhr0y1rcewIDAQABo4HxMIHuMB0GA1UdDgQWBBQEqlpkrYWCzJe69eMUdF1byztBmzCBvgYDVR0jBIG2MIGzgBQEqlpkrYWCzJe69eMUdF1byztBm6GBj6SBjDCBiTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMRQwEgYDVQQLEwtDaHJvbWl1bSBPUzEhMB8GA1UEAxMYVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYxggkA7ObfHPvVW7owDAYDVR0TBAUwAwEB_zANBgkqhkiG9w0BAQsFAAOCAQEAWsd3mq0dADTD7Tx2uYcDeJcJHO0x91hO26p2cqUSox4wPgc4_xk5yiteMgDB5CWLwgcuneDAYYMO1PmktpEvLu9a82gCGxGiww-w78OJTOrs68VM1zB0jqA3X5EyVSwVJqi8idgrnnGsJAcSBosnUI8pNi9SDC3MRPE1q1EUjuDNjsE7t_ItBe-MSMWCH2hpG8unZ7uwWCRfAV3Fkdnq_S5HzDy6-kKyGdj-rprhVeDz2xSyMOlNIJig4uuqU166DTfoQA2TxnMG_TuHt69Z4uZcVwx_HwPs2-vUCCYqZDwuuHKNIEm8kIK8sSPSsp22sC8h-7Klb8wj_d0lzShgkg==",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID0zCCArugAwIBAgIJANuXsNG_1HHxMA0GCSqGSIb3DQEBCwUAMH8xCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRYwFAYDVQQHDA1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKDAtHb29nbGUgTExDLjEUMBIGA1UECwwLQ2hyb21pdW0gT1MxFzAVBgNVBAMMDlVFRkkgREIgS2V5IHYxMCAXDTE4MDQyNzE1MDYzN1oYDzIyMTgwMzEwMTUwNjM3WjB_MQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMRcwFQYDVQQDDA5VRUZJIERCIEtleSB2MTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALWzFg8obysKXCjnbBTpAM8dMFC2pHX7GpwESNG-FYQI218Y1Ao1p5BttGqPoU5lGNeYUXxgxIqfN18ALHH10gRCRfqbC54faPU1lMr0e0jvi67GgGztyLl4ltAgK7HHTHmtZwghYNS45pKz_LFGm-TlKg-HPZBFT9GtbjRZe5IS2xdKkWM_sPA8qXwzvqmLN3OQckf0KchSUQmB3-wh4vYFV2TEjz10oR0FZO8LFFOOeooukcRDYy219XrdM21APnfszHmfKhzAFddOcYdwKwOL-w9TKVUwCIM70GL_YOtywA17mQkEm0ON79oyQ0daDlZ0ngDxC8xUIASYsRRPOkkCAwEAAaNQME4wHQYDVR0OBBYEFFO6MYgG9CvYp6qAqn_Jm-MANGpvMB8GA1UdIwQYMBaAFFO6MYgG9CvYp6qAqn_Jm-MANGpvMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAIGyOB_3oFo6f3WoFrdBzimb_weH8hejtCggpcL-8Wdex9VRl5MKi_1GlGbietMDsr1alwdaagam9RafuIQplohTSBnQrU-u-LbtRlCF9C25GDQ70S0QlxAQmt41Sc7kSFTPm6BHauF3b_Raf9AX30MamptoXoAhgMnHAitCn6yCOsRJ_d1t04lqsiqefhf26xItvRnkuxG7-IQnbyGFCGPcjFNAE1thLpL_6y_dprVwTLsvZnsWYj-1Gg1yUkOnCN8Kl3Q3RDVqo98mORUc0bKB-B8_FQsbtmzbb-29nXQJW1FJx0ejqJyDGGBPHAGpwEJTVB3mwWXzBU6Ny7T3dlk=",
                    "fileType": "X509"
                  },
                  {
                    "content": "MIID6TCCAtGgAwIBAgIJAKgdcZ45rGMDMA0GCSqGSIb3DQEBCwUAMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwIBcNMTgwNDI3MTUwNjM3WhgPMjIxODAzMTAxNTA2MzdaMIGJMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzEUMBIGA1UECgwLR29vZ2xlIExMQy4xFDASBgNVBAsMC0Nocm9taXVtIE9TMSEwHwYDVQQDDBhVRUZJIEtleSBFeGNoYW5nZSBLZXkgdjEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCbIdHPMQZZU68jI5kz5rmwvo-DQZZJ5amRnAUnBpNllhNQB6TaLUS_D9TIo_0X1e8T21Xk4Pf3D5ckbuQxsJzQ5OVEOb59sJ9AhjVUoxQxuVW-iBzD0mWbxKf2cASy2YRIEcaAAI5QT2SwO8gZy_G8LwAk-vO0vIbynN0WuFLl1Dp2cMQ3CxLSPH-QPSZyGd6o6ewUU9JzboppujXpk43EQH5ZJE_wJb_ujUFWcFzKHb_EkV1hI1TmBJ1-vR2kao4_1hQO6k1zLUR-MyBHY0SRU2OQxBpSez-qt7oItMBc1EanXvq9tqx0ndCTmXQYQplT5wtkPbE9sd5zwbDt8btHAgMBAAGjUDBOMB0GA1UdDgQWBBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAfBgNVHSMEGDAWgBS5Tmmv3JM8w1mfP9V5xAIdjBhb7TAMBgNVHRMEBTADAQH_MA0GCSqGSIb3DQEBCwUAA4IBAQB9BRTP37ik4jF2BmJJspMA6NHS7mxIckFCYKl-TO8zGFd3mlA6dnEw5WY-tUcBNJpAaHNJV_rzagGPpWMIoy-nAaLSSpnyhEXYTnQvzejYRijN3N0V9tmM0qgViHNBqTxdfcwlst5OUesGHPqgBOt5RRu5OGJ0rkuymWwxHOKIw43hz5FW7vhumbtJ3iy8HSFQIjSYMkr0sOzJhmvnHlpZ4pOoPNyNA9DM6smriH-2-MnJFM9w8bg6zsV5X-6KL464_FuXL_X_IWmAsAbi8Ge8ZMJjEaDrF1qkD4aLvu0MshzEdvrvQO-3Gn3Lmi_RYKR0HKZp7jXTySj76sxt9QK4",
                    "fileType": "X509"
                  }
                ],
                "keks": [
                  {
                    "content": "MIIELTCCAxWgAwIBAgIQCSAJUdgZtR6ZbRHEUNHqejANBgkqhkiG9w0BAQsFADCBmzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSgwJgYDVQQDEx9VRUZJIEtleSBFeGNoYW5nZSBLZXkgdjIwMjUxMDA0MB4XDTI1MTAwNTA3MDEzN1oXDTM1MTAwMzA3MDEzN1owgZsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtHb29nbGUgTExDLjEfMB0GA1UECxMWQ29udGFpbmVyIE9wdGltaXplZCBPUzEoMCYGA1UEAxMfVUVGSSBLZXkgRXhjaGFuZ2UgS2V5IHYyMDI1MTAwNDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALtHgORHltSha4VUV71rI6nJa1ElCBDikMv0vgAIW3_eAaDcPGEknke7qw0Wnfv-zr11iGcXpgTzfr2g5PcI0yloV3As_o0whLg8cFAvPIduTLo3vaMJAC_rPc8znRecXXPqWbnyqdFecm6m06rRBgF_z1ENoRruPuLGCIdWGZPj5pVcgjgNu5o1VP0ofHLWOq9s5adDz0WBJIUNLLwj-8_o15ztucSIccz_6CyGHQa3UQq5eF115qrITWWrVyJJxvL1n4UDWdjKxe6Dx_vLdMFPJf3qn3uY8ngg-Myu33X5yAxx36aPNNFiwBDiYvDjYGHpP_M6zqmORpy8uagUEpMCAwEAAaNrMGkwDwYDVR0TAQH_BAUwAwEB_zApBgNVHQ4EIgQgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwKwYDVR0jBCQwIoAgqR17cdDqyO28efglWM-xQsUxgFq-q5fsCJHwJMKm3nMwDQYJKoZIhvcNAQELBQADggEBAJsq2KQ-LnG_Fxgm7buvOhUliNfF0yKrIkVWIluzquM74wm6j3WJfqyDKbCdKwFIhTpo3Am1ntDoLXgsdwJZmb9xTBcG6n_Mtc37-8NbwqMNY23GmdISgc3jQbSxHdXu3ATsnd4raJ5qUYNCev3-y-QCNQOJ_f3FsB7sWxk0rHmuLFkBj_NMnmFWOf-ES0aRNvcVJBLDsuVBJw2yJmUIU4VyK3dNd_Kbz4lfyEYE0Jhn_OszmRZvHqIjk3Uh3tCWc6TS49nN4AqSRg6BYn9DUvtxSjgMS-sGfr7UAIuwkp7sQxrX7N-mxgesy-YLdER6I5gYkrvdxQEJ0ZWmLQVVEVI=",
                    "fileType": "X509"
                  }
                ],
                "pk": {
                  "content": "MIIEJTCCAw2gAwIBAgIQCcI-EvAZfNPQGwiY6XtQAjANBgkqhkiG9w0BAQsFADCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwHhcNMjUxMDA1MDcwMTMyWhcNMzUxMDAzMDcwMTMyWjCBlzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC0dvb2dsZSBMTEMuMR8wHQYDVQQLExZDb250YWluZXIgT3B0aW1pemVkIE9TMSQwIgYDVQQDExtVRUZJIFBsYXRmb3JtIEtleSB2MjAyNTEwMDQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDc3x1UG5WphPc_nllLfXCosTM_ir3dmCBB35K8PBg__lPsgp-YpNWN9iW5phCOWRxeXhcgkoVdKiL6rbB2q0Vr0V6D-JOajoi3us8q-164bmYLPFE9CSV7TinTOp6X92SfMWyX0_YgEzCX4J-GYRpYqHXBAh2USvchiRkf3_JZN9D6ujXSMpNrLtHyok9LyGGh7byziT-kc1fUjWTkFNwZ3VlqoLrRgIm1ohK5Cg7BMonB8WoWM53otKvE19YzFrNazMbUqu13OoKM3YfjAQ7wb_qBMDJEQGgUcvFSy6QpOSq93SXGAxgD1ViPkXDqX2b_eYR9Vt5zgFWf04yqV0ynAgMBAAGjazBpMA8GA1UdEwEB_wQFMAMBAf8wKQYDVR0OBCIEIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMCsGA1UdIwQkMCKAIIkhDpd2dmS0DL1ydEAgQYht3-gqiyFCSgZ9j3tk129mMA0GCSqGSIb3DQEBCwUAA4IBAQAPaBOTFhCYISUABgHp-L83NUwoZBf3Ve8X1dlPA-8TyVCtKcvOflpVPOgwPW4nCCpEGYfCfO21oPc29p2uCJhhEIOKdVOcA7mTXZBXrdiXtYPWNn90vWBMECelCmN9pktFN3ykyKYbPwP7263fv87RYpGVUWrjOSjDxMH1fbuLLQMxxAXtwPuc_TaF4z4D2bEVwq_pJ5P_Nnm_r1IXVVcN0zLOmrGlWAY9WuGPyL4_Cv4lBgmaYZXTwsu45DU2di-sj5UVKpfE52iP_HTDenKVmRssYx8ZsDVRwz7egf-Uojce9y8z837rZkNjEzhnPH1D3zcRgI3TI22-52TXefKW",
                  "fileType": "X509"
                }
              },
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo",
              "type": "PERSISTENT"
            },
            {
              "autoDelete": false,
              "boot": false,
              "deviceName": "hermit-demo-pd",
              "diskSizeGb": "50",
              "index": 1,
              "interface": "SCSI",
              "kind": "compute#attachedDisk",
              "mode": "READ_WRITE",
              "source": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/disks/hermit-demo-pd",
              "type": "PERSISTENT"
            }
          ],
          "fingerprint": "kQEUBG4-HBg=",
          "id": "8948240343373902296",
          "kind": "compute#instance",
          "labelFingerprint": "42WmSpB8rSM=",
          "lastStartTimestamp": "2025-12-05T13:31:45.185-08:00",
          "lastStopTimestamp": "2025-12-05T13:34:52.431-08:00",
          "machineType": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/machineTypes/n2-standard-2",
          "metadata": {
            "fingerprint": "TqWDuCqZ5zI=",
            "items": [
              {
                "key": "google-monitoring-enabled",
                "value": "true"
              },
              {
                "key": "user-data",
                "value": "#cloud-config\nbootcmd:\n- echo in-bootcmd\n- echo \"Starting cloudinit bootcmd...\" >> /var/log/hermit.log\n- mount\n- umount /tmp\n- mount --bind /var/tmp /tmp\n- 'mdadm --create /dev/md0 --level=0 --raid-devices=0 '\n- mkfs -t ext4 /dev/md0\n- mkdir -p /mnt/disks/local-ssd\n- mount -t ext4 /dev/md0 /mnt/disks/local-ssd\n- mkdir /mnt/disks/local-ssd/tmp\n- chmod 1777 /mnt/disks/local-ssd/tmp\n- mount --bind /mnt/disks/local-ssd/tmp /tmp\n- echo in-bootcmd-after-tmp-remount\n- mount\n- echo \"Starting check filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- fsck -C 1 -a /dev/disk/by-id/google-hermit-demo-pd >> /var/log/hermit.log\n- echo \"Finished checking filesystem /dev/disk/by-id/google-hermit-demo-pd\" >> /var/log/hermit.log\n- mkdir -p /mnt/disks/hermit-demo-pd\n- echo \"Mounting /dev/disk/by-id/google-hermit-demo-pd\" as /mnt/disks/hermit-demo-pd\n  >> /var/log/hermit.log\n- mount -t ext4 /dev/disk/by-id/google-hermit-demo-pd /mnt/disks/hermit-demo-pd\n- mkdir -p /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n- echo \"Finished hermit VM setup\" >> /var/log/hermit.log\nruncmd:\n- echo in-runcmd\n- bash /home/cloudservice/hermit-setup.sh >> /var/log/hermit.log 2>&1\nusers:\n- name: ubuntu\nwrite_files:\n- content: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDaYC3J7bMkK6IbJlDYpDu1KiESCo0a9jOjRNsaMocRz+P6ZF8nByuY75h8b2FgzA3yhL9/jXYkdmeX5FXYdc8mbyAg/uTXm176Eo1TghhwoGyOatoHr4ogBKsHsqpdl+QOukG7S2OyBXXrarGLgBKKSwTtz8dM1gtjR+cFzUZGn1cz7EVrXGiZLAoqtoNPmcG6ro3SHyeofPOMcBMM/HrC04ihJJ3Lfwcv9WRSDmQkUPeo119rPv59r4HHovSFK23oV9C+MPTq1AMcMn7jnUC5v3SLqIFq2icc3sxO52zbgfXuOjBhq5nFAxqHnPiyPDEQiQBiMdafnvNwNPzE6Mq3\n    pmontgom@MBRCF0-08B\n\n    '\n  path: /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n  permissions: '0700'\n- content: \"import subprocess\\nimport re\\nimport time\\nimport argparse\\nimport os\\n\\\n    \\n# cmd to suspend: docker run google/cloud-sdk gcloud compute instances suspend\\\n    \\ {name} --zone {zone}\\n# but needs additional scopes/permissions. Create a service\\\n    \\ account for this? Actually just a broadening the scope looks sufficient\\nimport\\\n    \\ logging\\n\\nlog = logging.getLogger(__name__)\\n\\n\\ndef main():\\n    parser =\\\n    \\ argparse.ArgumentParser()\\n    parser.add_argument(\\\"poll_frequency\\\", type=float)\\n\\\n    \\    parser.add_argument(\\\"activity_timeout\\\", type=float)\\n    parser.add_argument(\\\"\\\n    name\\\")\\n    parser.add_argument(\\\"zone\\\")\\n    parser.add_argument(\\\"project\\\"\\\n    )\\n    parser.add_argument(\\\"port\\\")\\n    args = parser.parse_args()\\n\\n    logging.basicConfig(level=logging.INFO)\\n\\\n    \\n    # fetch docker image at the beginning just to make sure it's successful\\\n    \\ and we don't wait until\\n    # we actually need it.\\n    subprocess.check_call([\\\"\\\n    docker\\\", \\\"pull\\\", \\\"google/cloud-sdk\\\"])\\n\\n    poll(\\n        args.poll_frequency\\\n    \\ * 60,\\n        args.activity_timeout * 60,\\n        args.name,\\n        args.zone,\\n\\\n    \\        args.project,\\n        args.port,\\n    )\\n\\n\\ndef poll(poll_frequency,\\\n    \\ activity_timeout, name, zone, project, port):\\n    suspend_fail_count = 0\\n\\\n    \\    last_bytes_transmitted = None\\n    last_activity = time.time()\\n    while\\\n    \\ True:\\n        bytes_transmitted = get_bytes_transmitted(port)\\n        if last_bytes_transmitted\\\n    \\ != bytes_transmitted:\\n            last_bytes_transmitted = bytes_transmitted\\n\\\n    \\            last_activity = time.time()\\n            log.info(\\\"%s\\\", f\\\"active\\\n    \\ (last_bytes_transmitted={last_bytes_transmitted})\\\")\\n\\n            # reset\\\n    \\ if there's some activity. Only want to count the number of failed suspends since\\\n    \\ we've decided that we're idle\\n            suspend_fail_count = 0\\n        elapsed_since_activity\\\n    \\ = time.time() - last_activity\\n        if elapsed_since_activity > activity_timeout:\\n\\\n    \\            log.info(\\n                \\\"%s\\\",\\n                f\\\"{elapsed_since_activity}\\\n    \\ seconds elapsed since last sign of activity. Suspending...\\\",\\n            )\\n\\\n    \\            successful_suspend = suspend_instance(name, zone, project)\\n    \\\n    \\        log.info(\\n                f\\\"Suspend is over. Waiting for {activity_timeout/60}\\\n    \\ minutes before polling again\\\"\\n            )\\n            time.sleep(activity_timeout)\\n\\\n    \\            # this is likely after the VM has been resumed but ...\\n        \\\n    \\    # it's been observed that the suspend command often reports failure even\\\n    \\ though the vm successfully suspended.\\n            # I don't have a reliable\\\n    \\ way of telling whether it worked or not. (Specificly, it gets a timeout trying\\\n    \\ to read the response\\n            # to the suspend request, because while it\\\n    \\ was\\n            # reading, the VM got suspended. ) In the event that suspend\\\n    \\ _really_ is broken, we want to shutdown as that's\\n            # safer then\\\n    \\ leaving the machine run forever. So, let's go with a heuristic of, if it fails\\\n    \\ repeatedly then shutdown.\\n\\n            if not successful_suspend:\\n      \\\n    \\          log.info(\\n                    \\\"Suspend command reportedly failed\\\n    \\ -- but not sure if that's true. Incrementing fail count\\\"\\n                )\\n\\\n    \\                suspend_fail_count += 1\\n\\n                if suspend_fail_count\\\n    \\ > 10:\\n                    log.info(\\n                        f\\\"suspending\\\n    \\ failed {suspend_fail_count} times. Shutting down as a last resort\\\"\\n      \\\n    \\              )\\n                    _shutdown()\\n\\n            log.info(\\\"Resuming\\\n    \\ polling...\\\")\\n        time.sleep(poll_frequency)\\n\\n\\ndef _shutdown():\\n  \\\n    \\  return_code = subprocess.run([\\\"shutdown\\\", \\\"--poweroff\\\"]).returncode\\n \\\n    \\   log.info(f\\\"return code = {return_code}\\\")\\n\\n\\ndef suspend_instance(name,\\\n    \\ zone, project):\\n    has_ssd = os.path.exists(\\\"/mnt/disks/local-ssd-0\\\")\\n\\\n    \\    cmd = [\\n        \\\"docker\\\",\\n        \\\"run\\\",\\n        \\\"google/cloud-sdk\\\"\\\n    ,\\n        \\\"gcloud\\\",\\n        \\\"compute\\\",\\n        \\\"instances\\\",\\n       \\\n    \\ \\\"suspend\\\",\\n        name,\\n        \\\"--zone\\\",\\n        zone,\\n        \\\"\\\n    --project\\\",\\n        project,\\n    ]\\n\\n    if has_ssd:\\n        cmd.append(\\\"\\\n    --discard-local-ssd=false\\\")\\n\\n    return_code = subprocess.run(cmd).returncode\\n\\\n    \\n    return return_code == 0\\n\\n\\ndef get_bytes_transmitted(port):\\n    output\\\n    \\ = subprocess.check_output([\\\"iptables\\\", \\\"-nvxL\\\", \\\"CONTAINER_SSH\\\"])\\n  \\\n    \\  lines = output.decode(\\\"utf8\\\").split(\\\"\\\\n\\\")\\n\\n    def parse():\\n      \\\n    \\  for line in lines:\\n            if (\\n                f\\\"tcp dpt:{port}\\\" in\\\n    \\ line\\n            ):  # find the line for the rule for traffic on the port\\n\\\n    \\                m = re.match(\\\"\\\\\\\\s*(\\\\\\\\d+)\\\\\\\\s+(\\\\\\\\d+)\\\\\\\\s+.\\\", line)\\n\\\n    \\                if m is not None:\\n                    return int(m.group(2))\\n\\\n    \\        return None  # could not find the rule\\n\\n    result = parse()\\n    if\\\n    \\ result is None:\\n        print(f\\\"Could not parse: {output}\\\")\\n    return result\\n\\\n    \\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\"\n  path: /home/cloudservice/suspend_on_idle.py\n- content: '\n\n    set -ex\n\n    echo \"initial mount state\"\n\n    mount\n\n    echo \"Setting up ubuntu home directory permissions...\"\n\n    usermod -u 2000 ubuntu\n\n    groupmod -g 2000 ubuntu\n\n    chown 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu\n\n    chmod -R 700 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    chown -R 2000:2000 /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh\n\n    echo \"Mounting home directory into place...\"\n\n    mount --bind /mnt/disks/hermit-demo-pd/home/ubuntu/ /home/ubuntu\n\n    chown ubuntu:ubuntu /mnt/disks/hermit-demo-pd/home/ubuntu/.ssh/authorized_keys\n\n    chmod 0666 /var/run/docker.sock\n\n    echo \"Starting up services...\"\n\n    systemctl daemon-reload\n\n    systemctl restart docker\n\n    systemctl start container-sshd.service\n\n    systemctl start suspend-on-idle.service\n\n    echo \"final mount state\"\n\n    mount\n\n    echo \"hermit-setup.sh complete\"\n\n    '\n  path: /home/cloudservice/hermit-setup.sh\n- content: '\n\n    # Create a chain for tracking traffic to ssh in container\n\n    iptables -N CONTAINER_SSH\n\n    iptables -I INPUT -j CONTAINER_SSH\n\n    iptables -A CONTAINER_SSH -p tcp --dport 3022\n\n    iptables -A INPUT -p tcp --dport 3022 -j ACCEPT\n\n    '\n  path: /home/cloudservice/setup_firewall\n- content: '\n\n    [Unit]\n\n    Description=Configures the host firewall\n\n\n    [Service]\n\n    Type=oneshot\n\n    RemainAfterExit=true\n\n    ExecStart=/bin/sh /home/cloudservice/setup_firewall\n\n    '\n  owner: root\n  path: /etc/systemd/system/config-firewall.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Container which we can connect via ssh\n\n    Wants=gcr-online.target config-firewall.service\n\n    After=gcr-online.target config-firewall.service\n\n\n    [Service]\n\n    Environment=\"HOME=/home/cloudservice\"\n\n    StandardOutput=append:/var/log/hermit.log\n\n    ExecStartPre=/usr/bin/docker-credential-gcr configure-docker --registries us-central1-docker.pkg.dev\n\n    ExecStart=/usr/bin/docker run --rm --name=container-sshd --network=host -v /var/run/docker.sock:/var/run/docker.sock\n    -v /tmp:/tmp -v /mnt/disks/hermit-demo-pd/home/ubuntu:/home/ubuntu us-central1-docker.pkg.dev/depmap-omics/docker/hermit-dev-env:v1\n    /usr/sbin/sshd -D -e -p 3022\n\n    ExecStop=/usr/bin/docker stop container-sshd\n\n    ExecStopPost=/usr/bin/docker rm container-sshd\n\n    Restart=always\n\n    '\n  owner: root\n  path: /etc/systemd/system/container-sshd.service\n  permissions: '0644'\n- content: '\n\n    [Unit]\n\n    Description=Suspend when container is detected to be idle\n\n    Wants=gcr-online.target\n\n    After=gcr-online.target\n\n\n    [Service]\n\n    ExecStart=/usr/bin/python /home/cloudservice/suspend_on_idle.py 1 30 hermit-demo\n    us-central1-a broad-achilles 3022\n\n    Restart=always'\n  owner: root\n  path: /etc/systemd/system/suspend-on-idle.service\n  permissions: '0644'\n- content: \"\\n{\\n\\t\\\"live-restore\\\": false,\\n\\t\\\"log-opts\\\": {\\n                \\\"\\\n    tag\\\": \\\"{{.Name}}\\\"\\n        },\\n\\t\\\"storage-driver\\\": \\\"overlay2\\\",\\n\\t\\\"mtu\\\"\\\n    : 1460\\n}\\n\"\n  owner: root\n  path: /etc/docker/daemon.json\n  permissions: '0644'\n"
              }
            ],
            "kind": "compute#metadata"
          },
          "name": "hermit-demo",
          "networkInterfaces": [
            {
              "accessConfigs": [
                {
                  "kind": "compute#accessConfig",
                  "name": "external-nat",
                  "networkTier": "PREMIUM",
                  "type": "ONE_TO_ONE_NAT"
                }
              ],
              "fingerprint": "kcIFDwFfI0Q=",
              "kind": "compute#networkInterface",
              "name": "nic0",
              "network": "https://www.googleapis.com/compute/v1/projects/broad-achilles/global/networks/default",
              "networkIP": "10.240.0.9",
              "stackType": "IPV4_ONLY"
            }
          ],
          "satisfiesPzi": false,
          "scheduling": {
            "automaticRestart": true,
            "onHostMaintenance": "TERMINATE",
            "preemptible": false,
            "provisioningModel": "STANDARD"
          },
          "selfLink": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a/instances/hermit-demo",
          "serviceAccounts": [
            {
              "email": "hermit-nrqacuv537@broad-achilles.iam.gserviceaccount.com",
              "scopes": [
                "https://www.googleapis.com/auth/compute",
                "https://www.googleapis.com/auth/devstorage.read_only",
                "https://www.googleapis.com/auth/logging.write",
                "https://www.googleapis.com/auth/monitoring.write",
                "https://www.googleapis.com/auth/pubsub",
                "https://www.googleapis.com/auth/service.management.readonly",
                "https://www.googleapis.com/auth/servicecontrol",
                "https://www.googleapis.com/auth/trace.append"
              ]
            }
          ],
          "shieldedInstanceConfig": {
            "enableIntegrityMonitoring": true,
            "enableSecureBoot": false,
            "enableVtpm": true
          },
          "shieldedInstanceIntegrityPolicy": {
            "updateAutoLearnPolicy": true
          },
          "startRestricted": false,
          "status": "TERMINATED",
          "tags": {
            "fingerprint": "42WmSpB8rSM="
          },
          "zone": "https://www.googleapis.com/compute/v1/projects/broad-achilles/zones/us-central1-a"
        }
      ]
    }
  ],
  [
    "gcloud",
    {
      "args": [
        [
          "compute",
          "instances",
          "delete",
          "hermit-demo",
          "--zone=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {
        "timeout": 300
      }
    },
    {
      "returned": null
    }
  ],
  [
    "gcloud_capturing_json_output",
    {
      "args": [
        [
          "compute",
          "instances",
          "list",
          "--filter=name=hermit-demo",
          "--format=json",
          "--zones=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {}
    },
    {
      "returned": []
    }
  ],
  [
    "gcloud",
    {
      "args": [
        [
          "compute",
          "disks",
          "delete",
          "hermit-demo-pd",
          "--zone=us-central1-a",
          "--project=broad-achilles"
        ]
      ],
      "kwargs": {
        "timeout": 300
      }
    },
    {
      "returned": null
    }
  ]
]